{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "$id": "felles/1.0/Kvittering.schema.json",
  "description": "Schema som beskriver kvitteringer som skal utveksles på tvers av virksomhetene",
  "additionalProperties": true,
  "properties": {
    "messageId": {
      "type": "string",
      "description": "Meldingsid for selve kvitteringen"
    },
    "messageIdRef": {
      "type": "string",
      "description": "Meldingsid for meldingen vi kvitterer"
    },
    "status": {
      "$ref": "#/definitions/StatusType",
      "description": "Status for meldingen vi kvitterer"
    },
    "description": {
      "type": "string",
      "description": "Tekstlig beskrivelse. Brukes i forbindelse med statusene FEILET_AVSENDER og FEILET_MOTTAKER"
    }
  },
  "definitions": {
    "StatusType": {
      "description": "Liste over mulige statuser",      
      "enum": [
        "UNDER_BEHANDLING",
        "MOTTATT",
        "FEILET_AVSENDER",
        "FEILET_MOTTAKER"
      ],
      "type": "string",
      "options": [{
            "value": "UNDER_BEHANDLING",            
            "description": "Indikerer at meldingen er mottatt, men ikke ferdig prosessert inn i saksbehandlingssystem. Det kan fremdeles oppstå feil som gjør at avsender eller mottaker må starte feilsøking."
        }, 
        {
          "value": "MOTTATT",
            "description": "Indikerer at alt er ok. Ingen ny status forventes. Avsender kan fjerne vedlegg fra filtjeneste når MOTTATT er mottatt."
        },
        {
          "value": "FEILET_AVSENDER",
            "description": "Indikerer at det er noe feil hos avsender. F.eks. feil format, manglende vedlegg etc. Det er forventet av _avsender_ iverksette nødvendige tiltak for å sende melding på nytt. En slik status skal aldri sendes etter at en MOTTATT melding er sendt. Ingen nye kvitteringer forventes."
        },
        {
          "value": "FEILET_MOTTAKER",
          "description": "Indikerer at det er noe feil hos mottaker. F.eks. bug eller system nede. Det er forventet at _mottaker_ undersøker. En slik status skal aldri sendes etter at en MOTTATT melding er sendt. Det forventes at det skal alltid komme en MOTTATT eller FEILET_AVSENDER kvittering i etterkant."
        }
      ]
      }
    }, 
    "required": [
				"messageId",
				"messageIdRef",
				"status"
			],
  "type": "object"
}